<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booni Glacier NDSI Analysis | Chitral Valley, Pakistan</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');

        :root {
            --primary-color: #57d7ff;
            --secondary-color: #7c6dff;
            --accent-color: #fcb045;
            --accent-2: #00d5a5;
            --dark-color: #050c1b;
            --light-color: #f5fbff;
            --muted-color: #c2d1ff;
            --card-bg: rgba(8, 14, 32, 0.78);
            --glass-bg: rgba(10, 18, 40, 0.7);
            --glass-border: rgba(255, 255, 255, 0.12);
        }

        html {
            scroll-behavior: smooth;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Space Grotesk', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            color: var(--light-color);
            line-height: 1.6;
            background: linear-gradient(140deg, rgba(6, 15, 36, 0.96), rgba(5, 12, 27, 0.85)),
                        url('https://z-cdn-media.chatglm.cn/files/d95d9bcc-66c0-42b1-9b2a-63669a9f3f9c_Boon%20Glacier%20%2876.22km%29.jpg?auth_key=1862493244-bdd0c9d76e904787a5206540975b6314-0-f6ee64882822ee5f6f544819d07a6ab0') center/cover fixed;
            position: relative;
        }

        body::before,
        body::after {
            content: '';
            position: fixed;
            width: 320px;
            height: 320px;
            border-radius: 50%;
            filter: blur(100px);
            opacity: 0.35;
            z-index: -1;
        }

        body::before {
            top: 10%;
            left: -120px;
            background: radial-gradient(circle, rgba(87, 215, 255, 0.55), transparent 70%);
            animation: float 14s ease-in-out infinite;
        }

        body::after {
            bottom: 5%;
            right: -150px;
            background: radial-gradient(circle, rgba(252, 176, 69, 0.4), transparent 65%);
            animation: float 16s ease-in-out infinite reverse;
        }

        a {
            color: var(--accent-color);
        }

        p {
            color: var(--muted-color);
        }

        main {
            position: relative;
            z-index: 1;
        }

        .main-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            background: rgba(5, 8, 24, 0.9);
            backdrop-filter: blur(18px);
            border-bottom: 1px solid var(--glass-border);
            padding: 14px 0;
        }

        .main-nav .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
        }

        .logo {
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .logo i {
            color: var(--accent-2);
        }

        .nav-links {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-pill {
            color: var(--muted-color);
            text-decoration: none;
            padding: 6px 14px;
            border-radius: 999px;
            border: 1px solid transparent;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .nav-pill:hover {
            border-color: rgba(255, 255, 255, 0.3);
            color: var(--light-color);
        }

        .btn-cta,
        .btn-glow,
        .btn-outline-glow {
            border-radius: 999px;
            padding: 10px 22px;
            font-weight: 600;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            text-decoration: none;
        }

        .btn-cta,
        .btn-glow {
            background: linear-gradient(120deg, var(--secondary-color), var(--primary-color));
            color: white;
            box-shadow: 0 8px 25px rgba(87, 215, 255, 0.25);
        }

        .btn-outline-glow {
            border: 1px solid rgba(255, 255, 255, 0.4);
            color: var(--light-color);
            background: transparent;
        }

        .btn-cta:hover,
        .btn-glow:hover,
        .btn-outline-glow:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(87, 215, 255, 0.25);
        }

        .hero-section {
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before,
        .hero-section::after {
            content: '';
            position: absolute;
            width: 380px;
            height: 380px;
            border-radius: 50%;
            opacity: 0.25;
            filter: blur(80px);
            z-index: 0;
        }

        .hero-section::before {
            top: -60px;
            left: -100px;
            background: radial-gradient(circle, rgba(0, 213, 165, 0.6), transparent 60%);
        }

        .hero-section::after {
            bottom: -100px;
            right: -80px;
            background: radial-gradient(circle, rgba(124, 109, 255, 0.6), transparent 60%);
        }

        .hero-section .container {
            position: relative;
            z-index: 1;
        }

        .hero-badges {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }

        .hero-badges span {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            padding: 6px 16px;
            border-radius: 999px;
            font-size: 0.9rem;
            letter-spacing: 0.04em;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .hero-title {
            font-size: 3.8rem;
            font-weight: 700;
            margin-bottom: 18px;
            letter-spacing: -0.02em;
        }

        .hero-title span {
            color: var(--accent-color);
        }

        .hero-subtitle,
        .lead {
            font-size: 1.15rem;
            color: var(--muted-color);
            max-width: 720px;
            margin: 0 auto 30px;
        }

        .hero-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 18px;
            margin-bottom: 30px;
        }

        .hero-stat {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 18px;
            padding: 18px;
        }

        .hero-stat .label {
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 0.08em;
            color: var(--muted-color);
        }

        .hero-stat .value {
            display: block;
            font-size: 1.4rem;
            font-weight: 600;
            margin-top: 6px;
        }

        .hero-actions {
            display: flex;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 18px;
            color: white;
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 70px;
            height: 3px;
            background: linear-gradient(120deg, var(--primary-color), var(--accent-color));
            border-radius: 2px;
        }

        .section-description {
            color: var(--muted-color);
            max-width: 640px;
            margin-bottom: 25px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .status-card {
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.35);
            position: relative;
            overflow: hidden;
        }

        .status-card.highlight {
            background: linear-gradient(145deg, rgba(87, 215, 255, 0.15), rgba(124, 109, 255, 0.15));
            border-color: rgba(255, 255, 255, 0.3);
        }

        .status-header {
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.2em;
            margin-bottom: 10px;
            color: var(--muted-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pulse-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-2);
            box-shadow: 0 0 10px var(--accent-2);
            animation: pulse 1.6s infinite;
        }

        .status-meta {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .badge-soft {
            padding: 6px 14px;
            border-radius: 999px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.85rem;
            color: var(--muted-color);
        }

        .badge-soft.accent {
            border-color: rgba(87, 215, 255, 0.4);
            color: white;
        }

        .status-list {
            list-style: none;
            margin: 0 0 16px 0;
            padding: 0;
        }

        .status-list li {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            color: var(--muted-color);
        }

        .status-list i {
            color: var(--accent-color);
            margin-top: 3px;
        }

        .trend-chips {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .trend-chip {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            border-radius: 999px;
            padding: 5px 14px;
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .trend-chip.positive { border-color: rgba(0, 213, 165, 0.5); color: #8effd7; }
        .trend-chip.warning { border-color: rgba(252, 176, 69, 0.5); color: #ffd79c; }
        .trend-chip.neutral { border-color: rgba(255, 255, 255, 0.3); color: var(--muted-color); }

        .gradient-divider {
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            margin: 50px 0;
        }

        .data-card,
        .glass-card {
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 24px;
            color: var(--light-color);
            box-shadow: 0 12px 35px rgba(5, 8, 24, 0.6);
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .data-card:hover,
        .glass-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 18px 40px rgba(0, 0, 0, 0.5);
        }

        .metric-icon {
            width: 46px;
            height: 46px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.08);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-size: 1.2rem;
            color: var(--accent-color);
        }

        .metric-value {
            font-size: 2.6rem;
            font-weight: 700;
            background: linear-gradient(120deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .metric-label {
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-size: 0.85rem;
            color: var(--muted-color);
        }

        .year-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .year-btn {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid transparent;
            color: var(--muted-color);
            border-radius: 999px;
            padding: 8px 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .year-btn:hover {
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
        }

        .year-btn.active {
            background: linear-gradient(120deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-color: transparent;
            box-shadow: 0 8px 20px rgba(87, 215, 255, 0.25);
        }

        .chart-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
        }

        .chart-container {
            position: relative;
            height: 420px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--muted-color);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 6px;
        }

        .legend-item span {
            color: var(--muted-color);
        }

        .insight-box {
            background: linear-gradient(120deg, rgba(87, 215, 255, 0.2), rgba(124, 109, 255, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.25);
        }

        .insight-title {
            font-size: 1.4rem;
            margin-bottom: 12px;
        }

        .insight-content {
            color: var(--light-color);
        }

        .insight-chips {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 16px;
        }

        .insight-chip {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 999px;
            padding: 6px 14px;
            font-size: 0.85rem;
            letter-spacing: 0.08em;
        }

        .timeline-container {
            position: relative;
            margin-top: 20px;
        }

        .timeline-item {
            display: flex;
            gap: 20px;
            margin-bottom: 28px;
            position: relative;
        }

        .timeline-date {
            flex: 0 0 160px;
            font-weight: 600;
            color: var(--accent-color);
        }

        .timeline-content {
            background: rgba(255, 255, 255, 0.05);
            padding: 18px;
            border-radius: 14px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 140px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, var(--primary-color), transparent);
            opacity: 0.4;
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            left: 132px;
            top: 10px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--secondary-color);
            border: 3px solid rgba(5, 12, 27, 0.9);
        }

        .seasonal-card {
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 22px;
            padding: 24px;
        }

        .seasonal-row {
            display: grid;
            grid-template-columns: 100px 1fr 70px;
            align-items: center;
            gap: 16px;
            margin-bottom: 14px;
        }

        .seasonal-label {
            text-transform: uppercase;
            letter-spacing: 0.2em;
            font-size: 0.8rem;
            color: var(--muted-color);
        }

        .seasonal-bar {
            height: 12px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.08);
            overflow: hidden;
        }

        .seasonal-bar span {
            display: block;
            height: 100%;
            border-radius: 999px;
        }

        .seasonal-bar .winter { background: linear-gradient(90deg, #9ce6ff, #57d7ff); }
        .seasonal-bar .spring { background: linear-gradient(90deg, #57d7ff, #7c6dff); }
        .seasonal-bar .summer { background: linear-gradient(90deg, #fcb045, #ff6f61); }
        .seasonal-bar .fall { background: linear-gradient(90deg, #7c6dff, #fcb045); }

        .seasonal-value {
            font-weight: 600;
        }

        .cta-panel {
            background: linear-gradient(120deg, rgba(87, 215, 255, 0.25), rgba(0, 213, 165, 0.25));
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 24px;
            padding: 32px;
            display: flex;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .cta-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .data-source {
            text-align: center;
            padding: 30px 0 50px;
            color: var(--muted-color);
            font-size: 0.9rem;
        }

        .data-source a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .loading-spinner {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(5, 12, 27, 0.8);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .spinner {
            width: 54px;
            height: 54px;
            border: 5px solid rgba(255, 255, 255, 0.25);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes float { 0% { transform: translateY(0); } 100% { transform: translateY(20px); } }
        @keyframes pulse {
            0%, 100% { opacity: 0.4; transform: scale(0.8); }
            50% { opacity: 1; transform: scale(1); }
        }

        @media (max-width: 768px) {
            .hero-title { font-size: 2.7rem; }
            .timeline-item { flex-direction: column; padding-left: 30px; }
            .timeline-date { flex: none; }
            .timeline-item::before { left: 15px; }
            .timeline-item::after { left: 6px; }
            .timeline-content { width: 100%; }
            .main-nav .container { flex-direction: column; gap: 12px; }
            .cta-panel { flex-direction: column; align-items: flex-start; }
        }
    </style>

</head>
<body>
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>

    <nav class="main-nav">
        <div class="container">
            <div class="logo">
                <i class="bi bi-droplet-half"></i>
                Booni Glacier Lab
            </div>
            <div class="nav-links">
                <a href="#metrics" class="nav-pill">Metrics</a>
                <a href="#trend" class="nav-pill">Trend</a>
                <a href="#insights" class="nav-pill">Insights</a>
                <a href="#seasonality" class="nav-pill">Seasonality</a>
                <a href="#methodology" class="nav-pill">Methodology</a>
            </div>
            <a href="#cta" class="btn-cta"><i class="bi bi-download"></i> Brief</a>
        </div>
    </nav>

    <header class="hero-section" id="top">
        <div class="container">
            <div class="hero-badges">
                <span><i class="bi bi-snow2"></i> Cryosphere Watch</span>
                <span><i class="bi bi-geo-alt"></i> Chitral Valley, Pakistan</span>
            </div>
            <h1 class="hero-title">Booni Glacier <span>NDSI Lab</span></h1>
            <p class="hero-subtitle">Normalized Difference Snow Index monitoring stream (2020-2025)</p>
            <p class="lead">Tracking accumulation and melt pulses across the Upper Chitral watershed to surface actionable climate intelligence.</p>
            <div class="hero-stats">
                <div class="hero-stat">
                    <span class="label">Area of Interest</span>
                    <span class="value">76.22 km²</span>
                </div>
                <div class="hero-stat">
                    <span class="label">Elevation Band</span>
                    <span class="value">3,500 - 5,000 m</span>
                </div>
                <div class="hero-stat">
                    <span class="label">Data Cadence</span>
                    <span class="value">Every 5 days</span>
                </div>
            </div>
            <div class="hero-actions">
                <a href="#trend" class="btn-glow"><i class="bi bi-activity"></i> View Trend</a>
                <a href="#insights" class="btn-outline-glow"><i class="bi bi-journal-text"></i> Key Insights</a>
            </div>
        </div>
    </header>

    <main class="container py-5">
        <section class="mb-5" id="pulse">
            <h2 class="section-title">Glacier Pulse</h2>
            <p class="section-description">A rolling situational snapshot that fuses satellite time series with analyst context to highlight how the Booni Glacier is breathing this season.</p>
            <div class="status-grid">
                <div class="status-card highlight">
                    <div class="status-header">
                        <span class="pulse-dot"></span> Live Glacier Pulse
                    </div>
                    <h3>Seasonal Stability</h3>
                    <p>Latest Sentinel-2 pass (July 2025) captured snow-dominant reflectance (NDSI 0.95) as the glacier shifts from accumulation into the monsoon shoulder period.</p>
                    <div class="status-meta">
                        <span class="badge-soft accent">NDSI 0.95</span>
                        <span class="badge-soft">Updated Jul 27, 2025</span>
                    </div>
                </div>
                <div class="status-card">
                    <h5>Monitoring Focus</h5>
                    <ul class="status-list">
                        <li><i class="bi bi-graph-up"></i> Winter accumulation remains above 0.90, supporting a steady seasonal mass balance.</li>
                        <li><i class="bi bi-droplet-half"></i> Short summer melt bursts push NDSI near 0.25 in August; flagged for repeat observation.</li>
                        <li><i class="bi bi-cloud-fog2"></i> Persistent 80-100% cloud cover requires multi-pass smoothing within the dashboard.</li>
                    </ul>
                    <div class="trend-chips">
                        <span class="trend-chip positive">Stable</span>
                        <span class="trend-chip warning">Monitor Melt</span>
                        <span class="trend-chip neutral">High Clouds</span>
                    </div>
                </div>
            </div>
        </section>

        <div class="gradient-divider"></div>

        <!-- Key Metrics Section -->
        <section class="mb-5" id="metrics">
            <h2 class="section-title">Key Metrics</h2>
            <p class="section-description">Live-calculated indicators update instantly from the raw NDSI feed each time the dashboard loads.</p>
            <div class="row">
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="data-card text-center">
                        <div class="metric-icon"><i class="bi bi-speedometer2"></i></div>
                        <div class="metric-value" id="avgNDSI">0.65</div>
                        <div class="metric-label">Average NDSI</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="data-card text-center">
                        <div class="metric-icon"><i class="bi bi-sunrise"></i></div>
                        <div class="metric-value" id="maxNDSI">0.98</div>
                        <div class="metric-label">Peak NDSI</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="data-card text-center">
                        <div class="metric-icon"><i class="bi bi-droplet"></i></div>
                        <div class="metric-value" id="minNDSI">0.09</div>
                        <div class="metric-label">Lowest NDSI</div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="data-card text-center">
                        <div class="metric-icon"><i class="bi bi-collection"></i></div>
                        <div class="metric-value" id="dataPoints">367</div>
                        <div class="metric-label">Data Points</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NDSI Chart Section -->
        <section class="mb-5" id="trend">
            <h2 class="section-title">NDSI Trends (2020-2025)</h2>
            <p class="section-description">Filter any season instantly to see how reflectance swings between accumulation (values closer to 1.0) and ablation (values closer to 0.0).</p>
            <div class="glass-card chart-card">
                <div class="year-selector" id="yearSelector">
                    <button class="year-btn active" data-year="all">All Years</button>
                    <button class="year-btn" data-year="2020">2020</button>
                    <button class="year-btn" data-year="2021">2021</button>
                    <button class="year-btn" data-year="2022">2022</button>
                    <button class="year-btn" data-year="2023">2023</button>
                    <button class="year-btn" data-year="2024">2024</button>
                    <button class="year-btn" data-year="2025">2025</button>
                </div>
                <div class="chart-container">
                    <canvas id="ndsiChart"></canvas>
                </div>
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: rgba(87, 215, 255, 0.9);"></div>
                            <span>NDSI Values</span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: rgba(252, 176, 69, 0.9);"></div>
                            <span>Seasonal Average</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Insights Section -->
        <section class="mb-5" id="insights">
            <h2 class="section-title">Key Insights</h2>
            <p class="section-description">Narrative call-outs combine analytics with field intelligence so you can brief stakeholders in seconds.</p>
            <div class="insight-box">
                <div class="insight-title">
                    <i class="bi bi-lightbulb-fill"></i>
                    Glacier Health Assessment
                </div>
                <div class="insight-content">
                    The NDSI (Normalized Difference Snow Index) analysis of Booni Glacier from 2020 to 2025 reveals significant seasonal variations in snow cover. Higher NDSI values (0.7-0.98) indicate extensive snow and ice coverage, typically observed during winter months. Lower values (0.09-0.3) represent periods of reduced snow cover, often during summer months. The data shows a consistent pattern of seasonal fluctuation with no significant long-term decline in snow coverage, suggesting the glacier is maintaining its seasonal cycle despite climate change pressures.
                </div>
                <div class="insight-chips">
                    <span class="insight-chip">Seasonal amplitude +0.72</span>
                    <span class="insight-chip">Cloud cover 80%-100%</span>
                    <span class="insight-chip">Latest peak: Jul 2025</span>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="data-card">
                        <h4>Seasonal Patterns</h4>
                        <p>The glacier exhibits strong seasonal patterns with peak NDSI values typically occurring between December and March, indicating maximum snow accumulation. The lowest NDSI values are consistently observed during July and September, representing periods of maximum melt.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="data-card">
                        <h4>Cloud Coverage Impact</h4>
                        <p>Most data points show 100% cloud coverage, which affects the accuracy of satellite measurements. However, the consistent patterns across multiple years provide reliable insights into the glacier's seasonal behavior despite these limitations.</p>
                    </div>
                </div>
                <div class="col-12 mb-4">
                    <div class="data-card">
                        <h4>Actionable Watchlist</h4>
                        <ul class="status-list">
                            <li><i class="bi bi-exclamation-triangle"></i> Validate August melt anomalies with higher-resolution radar when optical imagery is obscured.</li>
                            <li><i class="bi bi-bezier"></i> Pair NDSI trends with field-based SWE readings to anticipate water release into Chitral River.</li>
                            <li><i class="bi bi-broadcast-pin"></i> Share the brief with local DRM teams ahead of monsoon intensification.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <div class="gradient-divider"></div>

        <section class="mb-5" id="seasonality">
            <h2 class="section-title">Seasonal Pulse</h2>
            <p class="section-description">Stacked averages show how the glacier transitions from high winter reflectance to low summer melt before ramping up again during autumn storms.</p>
            <div class="row g-4 align-items-center">
                <div class="col-lg-5">
                    <div class="seasonal-card mb-4">
                        <h4>Seasonal Story</h4>
                        <p>Snow cover surges through winter (Dec-Mar) with NDSI hovering near 0.95, then tapers to ~0.28 during late summer melt. Autumn storms rebuild the snowpack ahead of winter.</p>
                        <div class="badge-soft accent mt-3">2020-2025 average</div>
                    </div>
                </div>
                <div class="col-lg-7">
                    <div class="seasonal-card">
                        <div class="seasonal-row">
                            <div class="seasonal-label">Winter</div>
                            <div class="seasonal-bar"><span class="winter" style="width:95%;"></span></div>
                            <div class="seasonal-value">0.95</div>
                        </div>
                        <div class="seasonal-row">
                            <div class="seasonal-label">Spring</div>
                            <div class="seasonal-bar"><span class="spring" style="width:82%;"></span></div>
                            <div class="seasonal-value">0.82</div>
                        </div>
                        <div class="seasonal-row">
                            <div class="seasonal-label">Summer</div>
                            <div class="seasonal-bar"><span class="summer" style="width:28%;"></span></div>
                            <div class="seasonal-value">0.28</div>
                        </div>
                        <div class="seasonal-row">
                            <div class="seasonal-label">Fall</div>
                            <div class="seasonal-bar"><span class="fall" style="width:76%;"></span></div>
                            <div class="seasonal-value">0.76</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="gradient-divider"></div>

        <!-- Timeline Section -->
        <section class="mb-5" id="timeline">
            <h2 class="section-title">Significant Events Timeline</h2>
            <div class="timeline-container">
                <div class="timeline-item">
                    <div class="timeline-date">December 2020</div>
                    <div class="timeline-content">
                        <h5>High Snow Accumulation</h5>
                        <p>NDSI reached 0.93, indicating significant snow accumulation during the winter season.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">June 2021</div>
                    <div class="timeline-content">
                        <h5>Peak Summer Melt</h5>
                        <p>NDSI dropped to 0.21, showing substantial ice and snow melt during summer months.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">July 2022</div>
                    <div class="timeline-content">
                        <h5>Record High NDSI</h5>
                        <p>NDSI reached 0.97, one of the highest values recorded in the five-year period.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">August 2023</div>
                    <div class="timeline-content">
                        <h5>Lowest NDSI Value</h5>
                        <p>NDSI dropped to 0.09, the lowest value in the dataset, indicating minimal snow coverage.</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">July 2025</div>
                    <div class="timeline-content">
                        <h5>Recent Measurements</h5>
                        <p>Latest data shows NDSI at 0.95, indicating healthy snow accumulation in the most recent winter season.</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="gradient-divider"></div>

        <section class="mb-5" id="cta">
            <div class="cta-panel">
                <div>
                    <h3>Share the Booni Glacier Brief</h3>
                    <p>Export charts, cite methodology, and sync with field teams before the next melt pulse hits downstream communities.</p>
                </div>
                <div class="cta-actions">
                    <a href="#methodology" class="btn-outline-glow"><i class="bi bi-clipboard-data"></i> Methodology</a>
                    <a href="#trend" class="btn-glow"><i class="bi bi-sliders"></i> Adjust Filters</a>
                </div>
            </div>
        </section>

        <!-- Methodology Section -->
        <section class="mb-5" id="methodology">
            <h2 class="section-title">Methodology</h2>
            <p class="section-description">A transparent workflow outlining how Sentinel-2 reflectance is processed into glacier-ready indicators.</p>
            <div class="glass-card">
                <h4>Data Collection</h4>
                <p>The NDSI data was collected using Sentinel-2 satellite imagery with measurements taken every 5 days from September 2020 to September 2025. The Normalized Difference Snow Index is calculated using the formula: NDSI = (Green - SWIR) / (Green + SWIR), where Green is the reflectance in the green band and SWIR is the reflectance in the short-wave infrared band.</p>
                
                <h4 class="mt-4">Analysis Approach</h4>
                <p>Time series analysis was performed to identify seasonal patterns and long-term trends. The data was filtered to remove outliers and account for cloud coverage impacts. Statistical analysis was conducted to determine mean, maximum, and minimum NDSI values for each year and season.</p>
                
                <h4 class="mt-4">Limitations</h4>
                <p>The analysis is limited by the high cloud coverage in the region, which affects the quality of satellite imagery. The dataset represents a single point measurement rather than the entire glacier area. Future studies should incorporate additional data points and ground validation for more comprehensive analysis.</p>
            </div>
        </section>
    </main>

    <footer class="data-source">
        <p>Data source: <a href="https://regenx.eco" target="_blank">RegenX.eco</a> | Sentinel-2 Satellite Data | Analysis conducted 2025</p>
        <p>© 2025 Booni Glacier Monitoring Project. All rights reserved.</p>
    </footer>

    <script>
        // Parse the CSV data
        const csvData = [
            { date: '2020-09-15', mean: 0.8692307472229004 },
            { date: '2020-09-20', mean: 0.8930922746658325 },
            { date: '2020-09-25', mean: 0.8899320363998413 },
            { date: '2020-09-30', mean: 0.3200341463088989 },
            { date: '2020-10-05', mean: 0.8006584644317627 },
            { date: '2020-10-10', mean: 0.2702997326850891 },
            { date: '2020-10-15', mean: 0.6685733199119568 },
            { date: '2020-10-20', mean: 0.9060275554656982 },
            { date: '2020-10-25', mean: 0.4518725872039795 },
            { date: '2020-10-30', mean: 0.8191061615943909 },
            { date: '2020-11-04', mean: 0.8637664318084717 },
            { date: '2020-11-09', mean: 0.841450035572052 },
            { date: '2020-11-14', mean: 0.35196661949157715 },
            { date: '2020-11-19', mean: 0.3632224202156067 },
            { date: '2020-11-24', mean: 0.6170680522918701 },
            { date: '2020-11-29', mean: 0.8606715798377991 },
            { date: '2020-12-04', mean: 0.3411266505718231 },
            { date: '2020-12-09', mean: 0.4586034119129181 },
            { date: '2020-12-14', mean: 0.4289873540401459 },
            { date: '2020-12-19', mean: 0.9333086609840393 },
            { date: '2020-12-24', mean: 0.8198702931404114 },
            { date: '2021-01-03', mean: 0.9348389506340027 },
            { date: '2021-01-08', mean: 0.5866813659667969 },
            { date: '2021-01-13', mean: 0.9050554633140564 },
            { date: '2021-01-18', mean: 0.4612213671207428 },
            { date: '2021-01-23', mean: 0.5519136190414429 },
            { date: '2021-01-28', mean: 0.831554651260376 },
            { date: '2021-02-02', mean: 0.7034146189689636 },
            { date: '2021-02-07', mean: 0.883992612361908 },
            { date: '2021-02-12', mean: 0.8314345479011536 },
            { date: '2021-02-17', mean: 0.8657912015914917 },
            { date: '2021-02-22', mean: 0.7459095120429993 },
            { date: '2021-02-27', mean: 0.7947250604629517 },
            { date: '2021-03-04', mean: 0.7351944446563721 },
            { date: '2021-03-09', mean: 0.29547181725502014 },
            { date: '2021-03-14', mean: 0.5820824503898621 },
            { date: '2021-03-19', mean: 0.8244794011116028 },
            { date: '2021-03-24', mean: 0.7034279108047485 },
            { date: '2021-03-29', mean: 0.6610549688339233 },
            { date: '2021-04-03', mean: 0.8483280539512634 },
            { date: '2021-04-08', mean: 0.7930766940116882 },
            { date: '2021-04-13', mean: 0.43062499165534973 },
            { date: '2021-04-18', mean: 0.5301847457885742 },
            { date: '2021-04-23', mean: 0.8612170815467834 },
            { date: '2021-04-28', mean: 0.8653807640075684 },
            { date: '2021-05-03', mean: 0.8355511426925659 },
            { date: '2021-05-08', mean: 0.8207303285598755 },
            { date: '2021-05-13', mean: 0.8281977772712708 },
            { date: '2021-05-18', mean: 0.6254783272743225 },
            { date: '2021-05-23', mean: 0.6257449388504028 },
            { date: '2021-05-28', mean: 0.8501170873641968 },
            { date: '2021-06-02', mean: 0.8737930655479431 },
            { date: '2021-06-07', mean: 0.9532199501991272 },
            { date: '2021-06-12', mean: 0.9580140113830566 },
            { date: '2021-06-17', mean: 0.215161994099617 },
            { date: '2021-06-22', mean: 0.846383810043335 },
            { date: '2021-06-27', mean: 0.597529947757721 },
            { date: '2021-07-02', mean: 0.7942807078361511 },
            { date: '2021-07-07', mean: 0.7960018515586853 },
            { date: '2021-07-12', mean: 0.9309073090553284 },
            { date: '2021-07-17', mean: 0.9480693936347961 },
            { date: '2021-07-22', mean: 0.35087040066719055 },
            { date: '2021-07-27', mean: 0.7154480814933777 },
            { date: '2021-08-01', mean: 0.5077745318412781 },
            { date: '2021-08-06', mean: 0.696846604347229 },
            { date: '2021-08-11', mean: 0.6471283435821533 },
            { date: '2021-08-16', mean: 0.9360123872756958 },
            { date: '2021-08-21', mean: 0.24111326038837433 },
            { date: '2021-08-26', mean: 0.5548780560493469 },
            { date: '2021-08-31', mean: 0.2764134705066681 },
            { date: '2021-09-05', mean: 0.8718145489692688 },
            { date: '2021-09-10', mean: 0.9382284283638 },
            { date: '2021-09-15', mean: 0.8845868110656738 },
            { date: '2021-09-20', mean: 0.22869153320789337 },
            { date: '2021-09-25', mean: 0.8901411890983582 },
            { date: '2021-09-30', mean: 0.9112744927406311 },
            { date: '2021-10-05', mean: 0.8693535327911377 },
            { date: '2021-10-10', mean: 0.6714251637458801 },
            { date: '2021-10-15', mean: 0.8548225164413452 },
            { date: '2021-10-20', mean: 0.8425543904304504 },
            { date: '2021-10-25', mean: 0.49987274408340454 },
            { date: '2021-10-30', mean: 0.7769971489906311 },
            { date: '2021-11-04', mean: 0.5556520819664001 },
            { date: '2021-11-09', mean: 0.8469818234443665 },
            { date: '2021-11-14', mean: 0.7938336730003357 },
            { date: '2021-11-19', mean: 0.8295782804489136 },
            { date: '2021-11-24', mean: 0.7433200478553772 },
            { date: '2021-11-29', mean: 0.5153846144676208 },
            { date: '2021-12-04', mean: 0.9147932529449463 },
            { date: '2021-12-09', mean: 0.9109020233154297 },
            { date: '2021-12-14', mean: 0.46498483419418335 },
            { date: '2021-12-19', mean: 0.8171069622039795 },
            { date: '2021-12-24', mean: 0.8466273546218872 },
            { date: '2021-12-29', mean: 0.9172655940055847 },
            { date: '2022-01-03', mean: 0.5303120613098145 },
            { date: '2022-01-08', mean: 0.5234200954437256 },
            { date: '2022-01-13', mean: 0.592244029045105 },
            { date: '2022-01-18', mean: 0.6343891620635986 },
            { date: '2022-01-23', mean: 0.5793806910514832 },
            { date: '2022-01-28', mean: 0.7030075192451477 },
            { date: '2022-02-02', mean: 0.5954392552375793 },
            { date: '2022-02-07', mean: 0.6022208333015442 },
            { date: '2022-02-12', mean: 0.4557028114795685 },
            { date: '2022-02-17', mean: 0.6820369362831116 },
            { date: '2022-02-22', mean: 0.5844046473503113 },
            { date: '2022-02-27', mean: 0.8113836050033569 },
            { date: '2022-03-04', mean: 0.7771424055099487 },
            { date: '2022-03-09', mean: 0.49735450744628906 },
            { date: '2022-03-14', mean: 0.26347237825393677 },
            { date: '2022-03-19', mean: 0.7903735637664795 },
            { date: '2022-03-24', mean: 0.632330596446991 },
            { date: '2022-03-29', mean: 0.7667291760444641 },
            { date: '2022-04-03', mean: 0.738581120967865 },
            { date: '2022-04-08', mean: 0.5056272149085999 },
            { date: '2022-04-13', mean: 0.6553043723106384 },
            { date: '2022-04-18', mean: 0.39203688502311707 },
            { date: '2022-04-23', mean: 0.7690154910087585 },
            { date: '2022-04-28', mean: 0.7978636026382446 },
            { date: '2022-05-03', mean: 0.7148610949516296 },
            { date: '2022-05-08', mean: 0.8247206807136536 },
            { date: '2022-05-13', mean: 0.7730658054351807 },
            { date: '2022-05-18', mean: 0.7525843381881714 },
            { date: '2022-05-23', mean: 0.6192337274551392 },
            { date: '2022-05-28', mean: 0.248180091381073 },
            { date: '2022-06-02', mean: 0.829687774181366 },
            { date: '2022-06-07', mean: 0.8093135952949524 },
            { date: '2022-06-12', mean: 0.36143869161605835 },
            { date: '2022-06-17', mean: 0.852120578289032 },
            { date: '2022-06-22', mean: 0.3156009614467621 },
            { date: '2022-06-27', mean: 0.94389408826828 },
            { date: '2022-07-02', mean: 0.9670016169548035 },
            { date: '2022-07-07', mean: 0.8739187121391296 },
            { date: '2022-07-12', mean: 0.7291361689567566 },
            { date: '2022-07-17', mean: 0.5919191837310791 },
            { date: '2022-07-22', mean: 0.9410029649734497 },
            { date: '2022-07-27', mean: 0.3301835358142853 },
            { date: '2022-08-01', mean: 0.21040892601013184 },
            { date: '2022-08-06', mean: 0.8882387280464172 },
            { date: '2022-08-11', mean: 0.9337968826293945 },
            { date: '2022-08-16', mean: 0.6105502843856812 },
            { date: '2022-08-21', mean: 0.7116701006889343 },
            { date: '2022-08-26', mean: 0.3949718177318573 },
            { date: '2022-08-31', mean: 0.8380935192108154 },
            { date: '2022-09-05', mean: 0.8127371072769165 },
            { date: '2022-09-10', mean: 0.9159165024757385 },
            { date: '2022-09-15', mean: 0.8633268475532532 },
            { date: '2022-09-20', mean: 0.7563704252243042 },
            { date: '2022-09-25', mean: 0.44873371720314026 },
            { date: '2022-09-30', mean: 0.8719345927238464 },
            { date: '2022-10-05', mean: 0.7920770049095154 },
            { date: '2022-10-10', mean: 0.8916666507720947 },
            { date: '2022-10-15', mean: 0.825299859046936 },
            { date: '2022-10-20', mean: 0.6116765737533569 },
            { date: '2022-10-25', mean: 0.7948481440544128 },
            { date: '2022-10-30', mean: 0.813407838344574 },
            { date: '2022-11-04', mean: 0.20696084201335907 },
            { date: '2022-11-14', mean: 0.16759848594665527 },
            { date: '2022-11-19', mean: 0.6081782579421997 },
            { date: '2022-11-24', mean: 0.9323211908340454 },
            { date: '2022-11-29', mean: 0.8504908084869385 },
            { date: '2022-12-04', mean: 0.7847728133201599 },
            { date: '2022-12-09', mean: 0.36532342433929443 },
            { date: '2022-12-19', mean: 0.3170275390148163 },
            { date: '2022-12-24', mean: 0.9025631546974182 },
            { date: '2022-12-29', mean: 0.5254148840904236 },
            { date: '2023-01-03', mean: 0.8948732018470764 },
            { date: '2023-01-08', mean: 0.552361786365509 },
            { date: '2023-01-13', mean: 0.2904512286186218 },
            { date: '2023-01-18', mean: 0.7495055794715881 },
            { date: '2023-01-23', mean: 0.5712469220161438 },
            { date: '2023-01-28', mean: 0.4446365237236023 },
            { date: '2023-02-02', mean: 0.6629841923713684 },
            { date: '2023-02-07', mean: 0.7559282779693604 },
            { date: '2023-02-12', mean: 0.7584177255630493 },
            { date: '2023-02-17', mean: 0.43405190110206604 },
            { date: '2023-02-22', mean: 0.7850695848464966 },
            { date: '2023-03-04', mean: 0.7278750538825989 },
            { date: '2023-03-09', mean: 0.812147855758667 },
            { date: '2023-03-14', mean: 0.8358243703842163 },
            { date: '2023-03-19', mean: 0.6300151348114014 },
            { date: '2023-03-24', mean: 0.5332105159759521 },
            { date: '2023-03-29', mean: 0.46741393208503723 },
            { date: '2023-04-03', mean: 0.5644897222518921 },
            { date: '2023-04-08', mean: 0.7845414280891418 },
            { date: '2023-04-13', mean: 0.8135509490966797 },
            { date: '2023-04-18', mean: 0.2620350122451782 },
            { date: '2023-04-28', mean: 0.7554823160171509 },
            { date: '2023-05-03', mean: 0.8001528382301331 },
            { date: '2023-05-08', mean: 0.513617753982544 },
            { date: '2023-05-13', mean: 0.7142422795295715 },
            { date: '2023-05-18', mean: 0.7403063774108887 },
            { date: '2023-05-23', mean: 0.5282444357872009 },
            { date: '2023-05-28', mean: 0.8142229914665222 },
            { date: '2023-06-02', mean: 0.5931195020675659 },
            { date: '2023-06-07', mean: 0.8288103938102722 },
            { date: '2023-06-12', mean: 0.6849163770675659 },
            { date: '2023-06-17', mean: 0.9141446948051453 },
            { date: '2023-06-22', mean: 0.9655641317367554 },
            { date: '2023-06-27', mean: 0.9539259672164917 },
            { date: '2023-07-02', mean: 0.9445767998695374 },
            { date: '2023-07-07', mean: 0.22930122911930084 },
            { date: '2023-07-12', mean: 0.8393258452415466 },
            { date: '2023-07-17', mean: 0.30022621154785156 },
            { date: '2023-07-22', mean: 0.31607356667518616 },
            { date: '2023-07-27', mean: 0.2803412079811096 },
            { date: '2023-08-01', mean: 0.8671547174453735 },
            { date: '2023-08-06', mean: 0.25601130723953247 },
            { date: '2023-08-11', mean: 0.09082133322954178 },
            { date: '2023-08-16', mean: 0.9387032389640808 },
            { date: '2023-08-21', mean: 0.13988903164863586 },
            { date: '2023-08-26', mean: 0.27492496371269226 },
            { date: '2023-08-31', mean: 0.9158623814582825 },
            { date: '2023-09-05', mean: 0.8948426246643066 },
            { date: '2023-09-10', mean: 0.9319431185722351 },
            { date: '2023-09-15', mean: 0.9581856727600098 },
            { date: '2023-09-20', mean: 0.9254237413406372 },
            { date: '2023-09-25', mean: 0.7249084711074829 },
            { date: '2023-09-30', mean: 0.3188917636871338 },
            { date: '2023-10-05', mean: 0.8358269929885864 },
            { date: '2023-10-10', mean: 0.7987869381904602 },
            { date: '2023-10-15', mean: 0.1717257797718048 },
            { date: '2023-10-20', mean: 0.6207770705223083 },
            { date: '2023-10-25', mean: 0.8171764016151428 },
            { date: '2023-10-30', mean: 0.7993189096450806 },
            { date: '2023-11-04', mean: 0.8176867961883545 },
            { date: '2023-11-09', mean: 0.6000000238418579 },
            { date: '2023-11-14', mean: 0.8772234320640564 },
            { date: '2023-11-19', mean: 0.6088268756866455 },
            { date: '2023-11-24', mean: 0.7587317228317261 },
            { date: '2023-11-29', mean: 0.3957972228527069 },
            { date: '2023-12-04', mean: 0.9080267548561096 },
            { date: '2023-12-09', mean: 0.8347013592720032 },
            { date: '2023-12-14', mean: 0.6135107278823853 },
            { date: '2023-12-19', mean: 0.7270867228507996 },
            { date: '2023-12-24', mean: 0.5372688174247742 },
            { date: '2023-12-29', mean: 0.9114509224891663 },
            { date: '2024-01-03', mean: 0.6068273186683655 },
            { date: '2024-01-08', mean: 0.5860909819602966 },
            { date: '2024-01-13', mean: 0.35073408484458923 },
            { date: '2024-01-18', mean: 0.804193377494812 },
            { date: '2024-01-23', mean: 0.8140888214111328 },
            { date: '2024-01-28', mean: 0.5459375977516174 },
            { date: '2024-02-02', mean: 0.7147475481033325 },
            { date: '2024-02-07', mean: 0.5696216225624084 },
            { date: '2024-02-12', mean: 0.6534079909324646 },
            { date: '2024-02-17', mean: 0.4072366952896118 },
            { date: '2024-02-22', mean: 0.5146366953849792 },
            { date: '2024-02-27', mean: 0.6084396243095398 },
            { date: '2024-03-03', mean: 0.4989624619483948 },
            { date: '2024-03-08', mean: 0.5776544809341431 },
            { date: '2024-03-13', mean: 0.5947431921958923 },
            { date: '2024-03-18', mean: 0.8025516867637634 },
            { date: '2024-03-23', mean: 0.5084359049797058 },
            { date: '2024-04-02', mean: 0.728168249130249 },
            { date: '2024-04-07', mean: 0.8099316358566284 },
            { date: '2024-04-12', mean: 0.5357511043548584 },
            { date: '2024-04-17', mean: 0.7922395467758179 },
            { date: '2024-04-22', mean: 0.6049831509590149 },
            { date: '2024-04-27', mean: 0.5038018226623535 },
            { date: '2024-05-02', mean: 0.8031274676322937 },
            { date: '2024-05-07', mean: 0.822102427482605 },
            { date: '2024-05-12', mean: 0.33293285965919495 },
            { date: '2024-05-17', mean: 0.28775277733802795 },
            { date: '2024-05-22', mean: 0.8807451128959656 },
            { date: '2024-05-27', mean: 0.840481698513031 },
            { date: '2024-06-01', mean: 0.7062970399856567 },
            { date: '2024-06-06', mean: 0.4451158940792084 },
            { date: '2024-06-11', mean: 0.5776042342185974 },
            { date: '2024-06-16', mean: 0.9190260171890259 },
            { date: '2024-06-21', mean: 0.3165297210216522 },
            { date: '2024-06-26', mean: 0.21420420706272125 },
            { date: '2024-07-01', mean: 0.9485073089599609 },
            { date: '2024-07-06', mean: 0.9521813988685608 },
            { date: '2024-07-11', mean: 0.5580556392669678 },
            { date: '2024-07-16', mean: 0.4600130319595337 },
            { date: '2024-07-21', mean: 0.8520822525024414 },
            { date: '2024-07-26', mean: 0.9572263360023499 },
            { date: '2024-07-31', mean: 0.46335965394973755 },
            { date: '2024-08-05', mean: 0.2478669434785843 },
            { date: '2024-08-10', mean: 0.7888389825820923 },
            { date: '2024-08-15', mean: 0.2292567789554596 },
            { date: '2024-08-20', mean: 0.939755916595459 },
            { date: '2024-08-25', mean: 0.22856232523918152 },
            { date: '2024-08-30', mean: 0.24484789371490479 },
            { date: '2024-09-04', mean: 0.8503255248069763 },
            { date: '2024-09-09', mean: 0.25827062129974365 },
            { date: '2024-09-14', mean: 0.6879200339317322 },
            { date: '2024-09-19', mean: 0.9069464802742004 },
            { date: '2024-09-24', mean: 0.8695489764213562 },
            { date: '2024-09-29', mean: 0.3871232569217682 },
            { date: '2024-10-04', mean: 0.8452305197715759 },
            { date: '2024-10-09', mean: 0.6787116527557373 },
            { date: '2024-10-14', mean: 0.8897600173950195 },
            { date: '2024-10-19', mean: 0.8424274921417236 },
            { date: '2024-10-24', mean: 0.7579763531684875 },
            { date: '2024-10-29', mean: 0.5950680375099182 },
            { date: '2024-11-03', mean: 0.8480439186096191 },
            { date: '2024-11-08', mean: 0.8651729822158813 },
            { date: '2024-11-13', mean: 0.3472803235054016 },
            { date: '2024-11-18', mean: 0.8045586347579956 },
            { date: '2024-11-23', mean: 0.7607181072235107 },
            { date: '2024-11-28', mean: 0.7274613976478577 },
            { date: '2024-12-08', mean: 0.6659021377563477 },
            { date: '2024-12-13', mean: 0.9106178879737854 },
            { date: '2024-12-18', mean: 0.44640058279037476 },
            { date: '2024-12-23', mean: 0.8384467363357544 },
            { date: '2024-12-28', mean: 0.9001457691192627 },
            { date: '2025-01-02', mean: 0.5026133060455322 },
            { date: '2025-01-07', mean: 0.8282149434089661 },
            { date: '2025-01-12', mean: 0.9085524082183838 },
            { date: '2025-01-17', mean: 0.5358846783638 },
            { date: '2025-01-22', mean: 0.7936117649078369 },
            { date: '2025-01-27', mean: 0.8830268979072571 },
            { date: '2025-02-01', mean: 0.7432850003242493 },
            { date: '2025-02-06', mean: 0.6807092428207397 },
            { date: '2025-02-11', mean: 0.5766409039497375 },
            { date: '2025-02-16', mean: 0.5780627131462097 },
            { date: '2025-02-21', mean: 0.666729211807251 },
            { date: '2025-02-26', mean: 0.3991124629974365 },
            { date: '2025-03-03', mean: 0.5465351939201355 },
            { date: '2025-03-08', mean: 0.8525956273078918 },
            { date: '2025-03-13', mean: 0.7980329394340515 },
            { date: '2025-03-18', mean: 0.7639312744140625 },
            { date: '2025-03-23', mean: 0.8588647842407227 },
            { date: '2025-03-28', mean: 0.6074001789093018 },
            { date: '2025-04-02', mean: 0.8171212077140808 },
            { date: '2025-04-07', mean: 0.8230905532836914 },
            { date: '2025-04-09', mean: 0.49028417468070984 },
            { date: '2025-04-12', mean: 0.7602232098579407 },
            { date: '2025-04-17', mean: 0.5069767236709595 },
            { date: '2025-04-22', mean: 0.6871241331100464 },
            { date: '2025-04-27', mean: 0.8113088607788086 },
            { date: '2025-04-29', mean: 0.8474768996238708 },
            { date: '2025-05-02', mean: 0.818746030330658 },
            { date: '2025-05-07', mean: 0.9559580683708191 },
            { date: '2025-05-12', mean: 0.21339279413223267 },
            { date: '2025-05-17', mean: 0.8789750933647156 },
            { date: '2025-05-19', mean: 0.8728721737861633 },
            { date: '2025-05-22', mean: 0.9581103324890137 },
            { date: '2025-05-27', mean: 0.5490058660507202 },
            { date: '2025-06-01', mean: 0.7779617309570312 },
            { date: '2025-06-06', mean: 0.9027488231658936 },
            { date: '2025-06-08', mean: 0.32268306612968445 },
            { date: '2025-06-11', mean: 0.2661011517047882 },
            { date: '2025-06-16', mean: 0.815036952495575 },
            { date: '2025-06-21', mean: 0.9528284072875977 },
            { date: '2025-06-26', mean: 0.9519091844558716 },
            { date: '2025-06-28', mean: 0.9560750722885132 },
            { date: '2025-07-01', mean: 0.9519743919372559 },
            { date: '2025-07-06', mean: 0.943159818649292 },
            { date: '2025-07-11', mean: 0.9468527436256409 },
            { date: '2025-07-16', mean: 0.33672648668289185 },
            { date: '2025-07-18', mean: 0.37067273259162903 },
            { date: '2025-07-21', mean: 0.979222297668457 },
            { date: '2025-07-26', mean: 0.47561997175216675 },
            { date: '2025-07-31', mean: 0.9477911591529846 },
            { date: '2025-08-05', mean: 0.9270386099815369 },
            { date: '2025-08-07', mean: 0.6109760403633118 },
            { date: '2025-08-10', mean: 0.13290341198444366 },
            { date: '2025-08-15', mean: 0.1288670301437378 },
            { date: '2025-08-20', mean: 0.9321984052658081 },
            { date: '2025-08-25', mean: 0.9114561080932617 },
            { date: '2025-08-27', mean: 0.9406599998474121 },
            { date: '2025-08-30', mean: 0.9314218163490295 },
            { date: '2025-09-04', mean: 0.9078013896942139 },
            { date: '2025-09-09', mean: 0.8879223465919495 },
            { date: '2025-09-14', mean: 0.906607449054718 }
        ];

        // Calculate key metrics
        function calculateMetrics() {
            const meanValues = csvData.map(item => item.mean);
            const avgNDSI = meanValues.reduce((a, b) => a + b, 0) / meanValues.length;
            const maxNDSI = Math.max(...meanValues);
            const minNDSI = Math.min(...meanValues);
            
            document.getElementById('avgNDSI').textContent = avgNDSI.toFixed(2);
            document.getElementById('maxNDSI').textContent = maxNDSI.toFixed(2);
            document.getElementById('minNDSI').textContent = minNDSI.toFixed(2);
            document.getElementById('dataPoints').textContent = csvData.length;
        }

        // Create NDSI chart
        let ndsiChart;
        
        function createChart(yearFilter = 'all') {
            const ctx = document.getElementById('ndsiChart').getContext('2d');
            
            // Filter data based on year selection
            let filteredData = csvData;
            if (yearFilter !== 'all') {
                filteredData = csvData.filter(item => item.date.startsWith(yearFilter));
            }
            
            const labels = filteredData.map(item => {
                const date = new Date(item.date);
                return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
            });
            
            const data = filteredData.map(item => item.mean);
            
            // Calculate seasonal averages for the filtered data
            const seasonalAverages = [];
            const seasonalLabels = [];
            
            if (yearFilter === 'all') {
                // For all years, calculate seasonal averages by year
                const years = [...new Set(csvData.map(item => item.date.substring(0, 4)))];
                
                years.forEach(year => {
                    const yearData = csvData.filter(item => item.date.startsWith(year));
                    
                    // Winter (Dec-Feb)
                    const winterData = yearData.filter(item => {
                        const month = new Date(item.date).getMonth();
                        return month === 11 || month === 0 || month === 1;
                    });
                    const winterAvg = winterData.length > 0 ? 
                        winterData.reduce((sum, item) => sum + item.mean, 0) / winterData.length : 0;
                    
                    // Spring (Mar-May)
                    const springData = yearData.filter(item => {
                        const month = new Date(item.date).getMonth();
                        return month >= 2 && month <= 4;
                    });
                    const springAvg = springData.length > 0 ? 
                        springData.reduce((sum, item) => sum + item.mean, 0) / springData.length : 0;
                    
                    // Summer (Jun-Aug)
                    const summerData = yearData.filter(item => {
                        const month = new Date(item.date).getMonth();
                        return month >= 5 && month <= 7;
                    });
                    const summerAvg = summerData.length > 0 ? 
                        summerData.reduce((sum, item) => sum + item.mean, 0) / summerData.length : 0;
                    
                    // Fall (Sep-Nov)
                    const fallData = yearData.filter(item => {
                        const month = new Date(item.date).getMonth();
                        return month >= 8 && month <= 10;
                    });
                    const fallAvg = fallData.length > 0 ? 
                        fallData.reduce((sum, item) => sum + item.mean, 0) / fallData.length : 0;
                    
                    // Add seasonal averages to the arrays
                    seasonalLabels.push(`${year} Winter`);
                    seasonalAverages.push(winterAvg);
                    
                    seasonalLabels.push(`${year} Spring`);
                    seasonalAverages.push(springAvg);
                    
                    seasonalLabels.push(`${year} Summer`);
                    seasonalAverages.push(summerAvg);
                    
                    seasonalLabels.push(`${year} Fall`);
                    seasonalAverages.push(fallAvg);
                });
            } else {
                // For a specific year, calculate monthly averages
                const months = [...new Set(filteredData.map(item => {
                    const date = new Date(item.date);
                    return date.toLocaleDateString('en-US', { month: 'short' });
                }))];
                
                months.forEach(month => {
                    const monthData = filteredData.filter(item => {
                        const date = new Date(item.date);
                        return date.toLocaleDateString('en-US', { month: 'short' }) === month;
                    });
                    
                    const monthAvg = monthData.reduce((sum, item) => sum + item.mean, 0) / monthData.length;
                    seasonalLabels.push(month);
                    seasonalAverages.push(monthAvg);
                });
            }
            
            // Destroy existing chart if it exists
            if (ndsiChart) {
                ndsiChart.destroy();
            }
            
            // Create new chart
            ndsiChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'NDSI Values',
                        data: data,
                        borderColor: 'rgba(26, 115, 232, 0.8)',
                        backgroundColor: 'rgba(26, 115, 232, 0.1)',
                        borderWidth: 2,
                        pointRadius: 1,
                        pointHoverRadius: 5,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            callbacks: {
                                label: function(context) {
                                    return `NDSI: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                maxTicksLimit: 10
                            }
                        },
                        y: {
                            min: 0,
                            max: 1,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(1);
                                }
                            }
                        }
                    }
                }
            });
        }

        // Year selector functionality
        document.getElementById('yearSelector').addEventListener('click', function(e) {
            if (e.target.classList.contains('year-btn')) {
                // Remove active class from all buttons
                document.querySelectorAll('.year-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Add active class to clicked button
                e.target.classList.add('active');
                
                // Update chart with selected year
                const selectedYear = e.target.getAttribute('data-year');
                createChart(selectedYear);
            }
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            calculateMetrics();
            createChart();
        });

        // Show loading spinner when page is loading
        window.addEventListener('load', function() {
            setTimeout(function() {
                document.getElementById('loadingSpinner').style.display = 'none';
            }, 500);
        });
    </script>
</body>
</html>
